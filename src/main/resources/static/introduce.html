<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Giới thiệu - Dịch vụ Tại Nhà</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Icons&display=swap">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <link href="/css/style_index.css" rel="stylesheet">
    <link href="/css/chatbot.css" rel="stylesheet">
    <link href="/css/style_introduce.css" rel="stylesheet">

    <style>
        .page-header {
            background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('/assets/images/service-default.jpg'); /* Bạn có thể thay ảnh khác */
            background-size: cover;
            background-position: center;
            color: #fff;
            padding: 100px 0;
            text-align: center;
            margin-bottom: 0;
        }

        .intro-section {
            padding: 60px 0;
            background-color: #fff;
        }

        .intro-content {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
            font-size: 1.1rem;
            line-height: 1.8;
            color: #555;
        }

        /* Stats Section */
        .stats-section {
            background-color: var(--primary-color);
            padding: 60px 0;
            color: #fff;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 30px;
            text-align: center;
        }

        .stat-item h2 {
            font-size: 3rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .stat-item p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        /* Values/Benefits Section */
        .values-section {
            padding: 60px 0;
            background-color: var(--bg-light);
        }

        .values-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
            margin-top: 40px;
        }

        .value-card {
            background: #fff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            text-align: center;
            transition: transform 0.3s ease;
        }

        .value-card:hover {
            transform: translateY(-10px);
        }

        .value-icon {
            width: 70px;
            height: 70px;
            background: rgba(67, 97, 238, 0.1);
            color: var(--primary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 1.8rem;
        }

        .value-card h3 {
            margin-bottom: 15px;
            color: #333;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            .values-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div id="success-alert" class="alert success-alert" style="display: none;">
        <div class="alert-content">
            <i class="fas fa-check-circle"></i>
            <span id="success-message"></span>
        </div>
        <button class="close-alert"><i class="fas fa-times"></i></button>
    </div>

    <header class="main-header">
        <div class="container header-container">
            <a href="/home.html" class="logo">
                <img src="/assets/logo/Ho_Anh_Tuan.png" alt="Logo" style="height: 50px; border-radius: 17px;">
                <span class="logo-text">Dịch vụ Tại Nhà</span>
            </a>

            <nav class="main-nav">
                <ul class="nav-menu">
                    <li class="nav-item"><a href="/home.html" class="nav-link">Trang chủ</a></li>
                    <li class="nav-item"><a href="/introduce.html" class="nav-link active">Giới thiệu</a></li>
                    <li class="nav-item"><a href="/services.html" class="nav-link">Dịch vụ</a></li>
                    <li class="nav-item"><a href="/service_price_list.html" class="nav-link">Bảng giá</a></li>
                    <li class="nav-item"><a href="/contact.html" class="nav-link">Liên hệ</a></li>
                </ul>
            </nav>

            <div class="header-actions">
                <div id="auth-section"></div>
                <button class="hamburger" aria-label="Menu">
                    <span class="bar"></span><span class="bar"></span><span class="bar"></span>
                </button>
            </div>
        </div>
    </header>

    <section class="page-header">
        <div class="container">
            <h1 style="font-size: 3rem; margin-bottom: 15px;">Về Chúng Tôi</h1>
            <p style="font-size: 1.2rem; max-width: 700px; margin: 0 auto;">Giải pháp tiện lợi cho cuộc sống hiện đại - Nơi niềm tin và chất lượng gặp gỡ.</p>
        </div>
    </section>

    <section class="intro-section">
        <div class="container">
            <div class="section-header">
                <span class="section-subtitle">Câu chuyện của chúng tôi</span>
                <h2 class="section-title">Sứ mệnh & Tầm nhìn</h2>
            </div>
            <div class="intro-content">
                <p>Trong nhịp sống hiện đại, thời gian trở thành tài sản quý giá nhất. <strong>Dịch vụ tại nhà</strong> ra đời như một giải pháp hoàn hảo, mang đến sự tiện lợi tối đa cho cuộc sống bận rộn của bạn.</p>
                <br>
                <p>Không cần di chuyển, không cần chờ đợi. Chỉ cần một vài cú nhấp chuột, đội ngũ chuyên gia của chúng tôi sẽ có mặt, mang đến trải nghiệm dịch vụ chuyên nghiệp ngay trong không gian riêng tư của bạn. Chúng tôi cam kết không chỉ sửa chữa hay dọn dẹp, mà còn mang đến sự an tâm tuyệt đối.</p>
            </div>
        </div>
    </section>

    <section class="stats-section">
        <div class="container">
            <div class="stats-grid">
                <div class="stat-item">
                    <h2 class="counter" data-target="5000">0</h2>
                    <p>Khách hàng hài lòng</p>
                </div>
                <div class="stat-item">
                    <h2 class="counter" data-target="10000">0</h2>
                    <p>Dịch vụ hoàn thành</p>
                </div>
                <div class="stat-item">
                    <h2 class="counter" data-target="200">0</h2>
                    <p>Chuyên gia</p>
                </div>
                <div class="stat-item">
                    <h2 class="counter" data-target="15">0</h2>
                    <p>Năm kinh nghiệm</p>
                </div>
            </div>
        </div>
    </section>

    <section class="values-section">
        <div class="container">
            <div class="section-header">
                <span class="section-subtitle">Tại sao chọn chúng tôi</span>
                <h2 class="section-title">Giá Trị Cốt Lõi</h2>
            </div>
            <div class="values-grid">
                <div class="value-card">
                    <div class="value-icon"><i class="fas fa-clock"></i></div>
                    <h3>Tiết Kiệm Thời Gian</h3>
                    <p>Đội ngũ chuyên gia đến tận nơi vào thời điểm thuận tiện nhất, giúp bạn tận dụng tối đa quỹ thời gian quý báu.</p>
                </div>
                <div class="value-card">
                    <div class="value-icon"><i class="fas fa-shield-alt"></i></div>
                    <h3>An Toàn & Tin Cậy</h3>
                    <p>Nhân viên được kiểm tra lý lịch kỹ lưỡng. Chúng tôi cam kết bảo hành dịch vụ và bảo mật thông tin khách hàng.</p>
                </div>
                <div class="value-card">
                    <div class="value-icon"><i class="fas fa-user-tie"></i></div>
                    <h3>Chuyên Nghiệp</h3>
                    <p>Kỹ thuật viên được đào tạo bài bản, có chứng chỉ hành nghề và thái độ phục vụ tận tâm, lịch sự.</p>
                </div>
                <div class="value-card">
                    <div class="value-icon"><i class="fas fa-tags"></i></div>
                    <h3>Giá Cả Minh Bạch</h3>
                    <p>Báo giá chi tiết trước khi thực hiện. Không có phí ẩn, không phát sinh chi phí vô lý.</p>
                </div>
                <div class="value-card">
                    <div class="value-icon"><i class="fas fa-headset"></i></div>
                    <h3>Hỗ Trợ 24/7</h3>
                    <p>Đội ngũ chăm sóc khách hàng luôn sẵn sàng lắng nghe và giải quyết mọi vấn đề của bạn bất cứ lúc nào.</p>
                </div>
                <div class="value-card">
                    <div class="value-icon"><i class="fas fa-star"></i></div>
                    <h3>Chất Lượng Hàng Đầu</h3>
                    <p>Chúng tôi không ngừng cải tiến quy trình và công nghệ để mang lại trải nghiệm tốt nhất cho khách hàng.</p>
                </div>
            </div>
        </div>
    </section>

    <section class="how-it-works" style="background-color: var(--primary-color); color: #fff; padding: 4rem 0;">
        <div class="container text-center">
            <h2 style="margin-bottom: 20px;">Sẵn sàng trải nghiệm dịch vụ?</h2>
            <p style="margin-bottom: 30px; opacity: 0.9;">Đặt lịch ngay hôm nay để nhận ưu đãi đặc biệt cho khách hàng mới.</p>
            <a href="/services.html" class="btn btn-light btn-lg" style="color: var(--primary-color); font-weight: bold;">
                <i class="material-icons">event</i> Đặt Lịch Ngay
            </a>
        </div>
    </section>

    <footer class="main-footer">
        <div class="footer-top">
            <div class="container">
                <div class="footer-grid">
                    <div class="footer-widget about-widget">
                        <a href="/index.html" class="footer-logo">
                            <img src="/assets/logo/Ho_Anh_Tuan.png" alt="Logo">
                            <span>Dịch vụ Tại Nhà</span>
                        </a>
                        <p>Cung cấp các dịch vụ tại nhà chất lượng cao, uy tín và chuyên nghiệp.</p>
                        <div class="social-links">
                            <a href="#" class="social-link facebook"><i class="fab fa-facebook-f"></i></a>
                            <a href="#" class="social-link instagram"><i class="fab fa-instagram"></i></a>
                            <a href="#" class="social-link tiktok"><i class="fab fa-tiktok"></i></a>
                            <a href="#" class="social-link youtube"><i class="fab fa-youtube"></i></a>
                        </div>
                    </div>
                    <div class="footer-widget">
                        <h3 class="widget-title">Điều hướng</h3>
                        <ul class="widget-links">
                            <li><a href="/home.html">Trang chủ</a></li>
                            <li><a href="/introduce.html">Giới thiệu</a></li>
                            <li><a href="/services.html">Dịch vụ</a></li>
                            <li><a href="/service_price_list.html">Bảng giá</a></li>
                            <li><a href="/contact.html">Liên hệ</a></li>
                        </ul>
                    </div>
                    <div class="footer-widget">
                        <h3 class="widget-title">Dịch vụ</h3>
                        <ul class="widget-links" id="footer-services">
                            </ul>
                    </div>
                    <div class="footer-widget">
                        <h3 class="widget-title">Hỗ trợ</h3>
                        <ul class="widget-links">
                            <li><a href="/terms.html">Điều khoản sử dụng</a></li>
                            <li><a href="/privacy.html">Chính sách bảo mật</a></li>
                            <li><a href="/faq.html">Câu hỏi thường gặp</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <div class="container">
                <p>&copy; 2025 Dịch vụ Tại Nhà. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <button id="backToTop" class="back-to-top"><i class="fas fa-chevron-up"></i></button>
    
    <div class="chat-support">
        <div class="chat-icon" id="chatIcon">
            <i class="fas fa-comments"></i>
            <span class="chat-notification" style="display: none;"></span>
        </div>
        <div class="chat-box" id="chatBox">
            <div class="chat-header">
                <div class="chat-title">
                    <div class="chat-avatar"><i class="fas fa-headset"></i></div>
                    <div>
                        <h3>Hỗ trợ trực tuyến</h3>
                        <span class="online-status"><i class="fas fa-circle"></i> Đang trực tuyến</span>
                    </div>
                </div>
                <div class="chat-actions">
                    <button id="minimizeChat"><i class="fas fa-minus"></i></button>
                    <button id="closeChat"><i class="fas fa-times"></i></button>
                </div>
            </div>
            <div class="chat-messages" id="chatMessages"></div>
            <div class="chat-input">
                <input type="text" id="messageInput" placeholder="Nhập tin nhắn..." autocomplete="off">
                <button id="sendMessage"><i class="fas fa-paper-plane"></i></button>
            </div>
        </div>
    </div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="/js/main.js"></script>
    <script src="/js/chatbot.js"></script>
    <script src="/js/notification.js?v=1.2"></script>

    <script>
        // 1. HÀM XỬ LÝ ẢNH (Thêm vào để avatar hiện đúng)
        function getImageUrl(imagePath) {
            if (!imagePath) return '/assets/avatar/default-avatar.png';
            if (imagePath.startsWith('http') || imagePath.startsWith('https')) return imagePath;
            if (imagePath.startsWith('/assets/')) return imagePath;
            return `/assets/avatar/${imagePath}`;
        }

        // 2. LOGIC AUTH (Đã sửa lỗi tự đăng xuất oan)
        function loadAuthSection() {
            const token = localStorage.getItem('jwtToken');
            const authSection = document.getElementById('auth-section');

            if (token) {
                fetch('/api/users/me', {
                    headers: { 'Authorization': `Bearer ${token}` }
                })
                .then(res => {
                    // Chỉ xóa token nếu lỗi 401 (Hết hạn) hoặc 403 (Cấm)
                    if (res.status === 401 || res.status === 403) {
                        localStorage.removeItem('jwtToken');
                        throw new Error("Token expired");
                    }
                    if (!res.ok) throw new Error("Network error");
                    return res.json();
                })
                .then(user => {
                    // Xử lý avatar chuẩn
                    const avatar = getImageUrl(user.avatarURL);
                    const displayName = user.hoTen || 'Người dùng';
                    
                    authSection.innerHTML = `
                        <div class="header-actions">
                            <div class="notification-container">
                                <div class="notification-icon notification-bell">
                                    <i class="fas fa-bell"></i>
                                    <span class="notification-badge" style="display: none;"></span>
                                </div>
                                <div class="notification-dropdown">
                                    <div class="notification-header">
                                        <h3>Thông báo</h3>
                                        <button class="mark-all-read">Đánh dấu tất cả đã đọc</button>
                                    </div>
                                    <div class="notification-list" id="notification-list"></div>
                                    <div class="notification-footer">
                                        <a href="/notifications.html">Xem tất cả thông báo</a>
                                    </div>
                                </div>
                            </div>
                            <div class="user-menu-container">
                                <div class="user-menu-trigger">
                                    <img src="${avatar}" alt="Avatar" class="user-avatar" onerror="this.src='/assets/avatar/default-avatar.png'">
                                    <span class="user-name">${displayName}</span>
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                                <div class="user-dropdown">
                                    <a href="/account.html" class="user-dropdown-item"><i class="fas fa-user"></i> Hồ sơ cá nhân</a>
                                    <a href="/my_bookings.html" class="user-dropdown-item"><i class="fas fa-calendar-check"></i> Đơn đặt dịch vụ</a>
                                    <a href="/cart.html" class="user-dropdown-item"><i class="fas fa-shopping-cart"></i> Giỏ hàng của tôi</a>
                                    <a href="/change_password.html" class="user-dropdown-item"><i class="fas fa-key"></i> Đổi mật khẩu</a>
                                    <div class="dropdown-divider"></div>
                                    <a href="#" onclick="logout()" class="user-dropdown-item logout"><i class="fas fa-sign-out-alt"></i> Đăng xuất</a>
                                </div>
                            </div>
                        </div>
                    `;
                    
                    // Kích hoạt notification sau khi render
                    if(typeof updateBadgeCount === 'function') {
                        const initialCount = localStorage.getItem('unreadNotificationCount') || 0;
                        updateBadgeCount(initialCount);
                    }
                    if(typeof loadNotifications === 'function') loadNotifications(token);
                    if(typeof setupNotificationClick === 'function') setupNotificationClick();
                })
                .catch((err) => {
                    console.error("Lỗi load User:", err);
                    // Nếu lỗi mạng -> Chỉ hiện lại nút đăng nhập, KHÔNG XÓA TOKEN
                    authSection.innerHTML = `<div class="auth-buttons"><a href="/login.html" class="btn btn-outline">Đăng nhập</a><a href="/register.html" class="btn btn-primary">Đăng ký</a></div>`;
                });
            } else {
                authSection.innerHTML = `<div class="auth-buttons"><a href="/login.html" class="btn btn-outline">Đăng nhập</a><a href="/register.html" class="btn btn-primary">Đăng ký</a></div>`;
            }
        }

        function logout() {
            localStorage.removeItem('jwtToken');
            localStorage.removeItem('userRole');
            window.location.href = '/login.html';
        }

        // 3. LOGIC FOOTER (Load danh sách dịch vụ)
        function loadFooterServices() {
            fetch('/api/services?page=0&size=5')
            .then(r => r.json())
            .then(services => {
                const list = document.getElementById('footer-services');
                if(list && services.content) {
                    list.innerHTML = services.content.map(s => `
                        <li><a href="/service_detail.html?id=${s.id}">${s.tenDichVu}</a></li>
                    `).join('');
                }
            }).catch(() => {});
        }

        // 4. LOGIC ANIMATION SỐ ĐẾM (Stats)
        function animateStats() {
            const stats = document.querySelectorAll('.counter');
            stats.forEach(stat => {
                const target = +stat.getAttribute('data-target');
                const duration = 2000; 
                const increment = target / (duration / 16); 
                
                let current = 0;
                const updateCount = () => {
                    current += increment;
                    if (current < target) {
                        stat.innerText = Math.ceil(current).toLocaleString() + '+';
                        requestAnimationFrame(updateCount);
                    } else {
                        stat.innerText = target.toLocaleString() + '+';
                    }
                };
                updateCount();
            });
        }

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    animateStats();
                    observer.disconnect(); 
                }
            });
        }, { threshold: 0.5 });

        // DOM READY
        document.addEventListener('DOMContentLoaded', () => {
            loadAuthSection();
            loadFooterServices();
            
            // Back To Top
            const backToTop = document.getElementById('backToTop');
            window.addEventListener('scroll', () => {
                if (window.scrollY > 300) backToTop.classList.add('active');
                else backToTop.classList.remove('active');
            });
            backToTop.addEventListener('click', () => window.scrollTo({top: 0, behavior: 'smooth'}));

            // Mobile Menu
            const hamburger = document.querySelector('.hamburger');
            const navMenu = document.querySelector('.nav-menu');
            if(hamburger) {
                hamburger.addEventListener('click', () => {
                    hamburger.classList.toggle('active');
                    navMenu.classList.toggle('active');
                });
            }

            // Start Stats Animation
            const statsSection = document.querySelector('.stats-section');
            if(statsSection) observer.observe(statsSection);
            
            // Chatbot
            if (typeof initChatbot === 'function') initChatbot();
        });
    </script>
</body>
</html>